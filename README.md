# ğŸ›ï¸ TrustLegal - AI-Powered Contract Analysis Platform

> **Ná»n táº£ng phÃ¡p lÃ½ thÃ´ng minh** sá»­ dá»¥ng Retrieval-Augmented Generation (RAG) vÃ  Large Language Models Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh rÃ  soÃ¡t, phÃ¢n tÃ­ch rá»§i ro vÃ  tra cá»©u há»£p Ä‘á»“ng cho doanh nghiá»‡p hiá»‡n Ä‘áº¡i.

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Version](https://img.shields.io/badge/version-1.0.0-green.svg)
![Status](https://img.shields.io/badge/status-Active-brightgreen.svg)

**[ğŸ¯ TÃ­nh NÄƒng](#-tÃ­nh-nÄƒng) â€¢ [ğŸ—ï¸ Kiáº¿n TrÃºc](#-kiáº¿n-trÃºc) â€¢ [âš¡ Khá»Ÿi Äá»™ng Nhanh](#-khá»Ÿi-Ä‘á»™ng-nhanh) â€¢ [ğŸ“š HÆ°á»›ng Dáº«n](#-hÆ°á»›ng-dáº«n-chi-tiáº¿t) â€¢ [ğŸš€ Triá»ƒn Khai](#-triá»ƒn-khai)**

</div>

---

## ğŸ“‹ Tá»•ng Quan Dá»± Ãn

**TrustLegal** lÃ  má»™t giáº£i phÃ¡p toÃ n diá»‡n cho ngÃ nh phÃ¡p lÃ½ hiá»‡n Ä‘áº¡i, káº¿t há»£p:

- ğŸ¤– **AI Analysis**: PhÃ¢n tÃ­ch há»£p Ä‘á»“ng tá»± Ä‘á»™ng báº±ng Claude 3 Haiku + AWS Bedrock
- ğŸ’¬ **Chat Interface**: Giao diá»‡n há»™i thoáº¡i tÆ°Æ¡ng tÃ¡c Ä‘á»ƒ há»i Ä‘Ã¡p vá» há»£p Ä‘á»“ng
- ğŸ“° **News Integration**: Cáº­p nháº­t tin tá»©c phÃ¡p lÃ½, kinh táº¿ tá»« BÃ¡o ChÃ­nh Phá»§ (RAG)
- ğŸ” **User Management**: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng vá»›i xÃ¡c thá»±c báº£o máº­t
- ğŸ’³ **Subscription Plans**: Há»‡ thá»‘ng gÃ³i dá»‹ch vá»¥ (Free Trial, Pro, Enterprise)
- ğŸ“Š **Risk Assessment**: ÄÃ¡nh giÃ¡ rá»§i ro chi tiáº¿t cho má»—i há»£p Ä‘á»“ng

---

## ğŸ¯ TÃ­nh NÄƒng

### âœ¨ TÃ­nh NÄƒng ChÃ­nh

| TÃ­nh NÄƒng | MÃ´ Táº£ |
|-----------|--------|
| **ğŸ“¤ Upload Há»£p Äá»“ng** | Há»— trá»£ PDF, DOCX, TXT vá»›i xá»­ lÃ½ Unicode Viá»‡t Nam |
| **ğŸ” PhÃ¢n TÃ­ch AI** | TrÃ­ch xuáº¥t Ä‘iá»u khoáº£n, Ä‘Ã¡nh giÃ¡ rá»§i ro, tÃ³m táº¯t ná»™i dung |
| **âš ï¸ Risk Scoring** | PhÃ¢n loáº¡i rá»§i ro (LOW, MEDIUM, HIGH, CRITICAL) |
| **ğŸ’¬ Chat vá»›i AI** | Há»i cÃ¢u há»i cá»¥ thá»ƒ vá» há»£p Ä‘á»“ng, nháº­n cÃ¢u tráº£ lá»i cÃ³ ngá»¯ cáº£nh |
| **ğŸ“š Tra Cá»©u PhÃ¡p LÃ½** | TÃ¬m kiáº¿m ngá»¯ nghÄ©a, luáº­t liÃªn quan, Ã¡n lá»‡ |
| **ğŸ“° News Feed** | Cáº­p nháº­t tin tá»©c kinh táº¿, chÃ­nh sÃ¡ch tá»« cÃ¡c nguá»“n tin uy tÃ­n |
| **ğŸ” XÃ¡c Thá»±c** | ÄÄƒng kÃ½/ÄÄƒng nháº­p vá»›i email & máº­t kháº©u hoáº·c Google OAuth |
| **ğŸ’¾ LÆ°u Trá»¯** | Lá»‹ch sá»­ phÃ¢n tÃ­ch, phiÃªn chat Ä‘Æ°á»£c lÆ°u trá»¯ vÄ©nh viá»…n |

### ğŸ¨ Giao Diá»‡n NgÆ°á»i DÃ¹ng

- **Modern Design**: Tailwind CSS + Dark Mode
- **Responsive**: Tá»‘i Æ°u cho mobile, tablet, desktop
- **Real-time Feedback**: Hiá»ƒn thá»‹ tráº¡ng thÃ¡i xá»­ lÃ½ trá»±c tiáº¿p

---

## ğŸ—ï¸ Kiáº¿n TrÃºc

```
TrustLegal (Fullstack)
â”‚
â”œâ”€â”€ ğŸ¨ Frontend (Next.js 15 + TypeScript)
â”‚   â”œâ”€â”€ App Router
â”‚   â”œâ”€â”€ Components
â”‚   â”‚   â”œâ”€â”€ Contract Upload
â”‚   â”‚   â”œâ”€â”€ Chat Interface
â”‚   â”‚   â”œâ”€â”€ Risk Analysis Display
â”‚   â”‚   â””â”€â”€ News Feed
â”‚   â””â”€â”€ UI Library (Tailwind + Shadcn/ui)
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ Backend (Express + TypeScript)
â”‚   â”œâ”€â”€ REST API
â”‚   â”œâ”€â”€ Authentication (JWT + bcrypt)
â”‚   â”œâ”€â”€ File Upload (Multer)
â”‚   â”œâ”€â”€ Database ORM (Prisma)
â”‚   â”œâ”€â”€ News Crawler (Cheerio + Axios)
â”‚   â””â”€â”€ AI Lambda Integration
â”‚
â”œâ”€â”€ ğŸ¤– AI Service (FastAPI + Python)
â”‚   â”œâ”€â”€ AWS Bedrock Integration
â”‚   â”œâ”€â”€ RAG Pipeline
â”‚   â”œâ”€â”€ Claude 3 Haiku LLM
â”‚   â””â”€â”€ Embedding Processing
â”‚
â””â”€â”€ ğŸ’¾ Database (PostgreSQL)
    â”œâ”€â”€ Users
    â”œâ”€â”€ Contracts
    â”œâ”€â”€ Analysis Reports
    â”œâ”€â”€ Chat Sessions
    â””â”€â”€ Subscriptions
```

---

## ğŸ› ï¸ Tech Stack

### Frontend
- **Framework**: Next.js 15.1
- **Language**: TypeScript
- **Styling**: Tailwind CSS + PostCSS
- **UI Components**: Shadcn/ui + Lucide Icons
- **HTTP Client**: Fetch API

### Backend
- **Runtime**: Node.js
- **Framework**: Express 5
- **ORM**: Prisma 5
- **Authentication**: bcryptjs + JWT
- **File Handling**: Multer
- **Web Scraping**: Cheerio + Axios
- **Email**: Nodemailer

### AI/ML
- **Framework**: FastAPI
- **LLM Provider**: AWS Bedrock (Claude 3 Haiku)
- **RAG**: Custom implementation
- **Language**: Python 3.11+

### Infrastructure
- **Database**: PostgreSQL 15+
- **File Storage**: Local (uploads/) hoáº·c S3
- **Deployment**: Docker ready

---

## âš¡ Khá»Ÿi Äá»™ng Nhanh

### YÃªu Cáº§u
- **Node.js** â‰¥ 18.x
- **Python** â‰¥ 3.11
- **PostgreSQL** â‰¥ 15
- **AWS Account** (cho Bedrock)

### 1ï¸âƒ£ Clone Repository

```bash
git clone https://github.com/yourusername/trustlegal.git
cd trustlegal
```

### 2ï¸âƒ£ Cáº¥u HÃ¬nh Biáº¿n MÃ´i TrÆ°á»ng

#### Backend (.env)
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/trustlegal"

# AWS
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_DEFAULT_REGION=us-east-1

# AI Service
AI_LAMBDA_URL=http://localhost:8000/contracts/analyze

# Email (Optional)
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
```

#### AI Service (.env)
```env
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_DEFAULT_REGION=us-east-1
```

### 3ï¸âƒ£ CÃ i Äáº·t Dependencies

```bash
# Install táº¥t cáº£
npm run install:all

# Hoáº·c láº§n lÆ°á»£t
npm install                    # Root
cd frontend && npm install     # Frontend
cd ../backend && npm install   # Backend
cd ../AI-Service && pip install -r requirements.txt  # AI
```

### 4ï¸âƒ£ Setup Database

```bash
cd backend
npx prisma db push        # Äáº©y schema lÃªn DB
npx prisma generate      # Generate Prisma Client
cd ..
```

### 5ï¸âƒ£ Khá»Ÿi Äá»™ng Services

```bash
# Cháº¡y táº¥t cáº£ (Backend + Frontend + AI) Ä‘á»“ng thá»i
npm run dev

# Hoáº·c tá»«ng cÃ¡i riÃªng:
npm run backend    # Terminal 1: Backend on http://localhost:5000
npm run frontend   # Terminal 2: Frontend on http://localhost:3000
npm run ai         # Terminal 3: AI on http://localhost:8000
```

### ğŸ‰ Truy Cáº­p

| Service | URL | Port |
|---------|-----|------|
| Frontend | http://localhost:3000 | 3000 |
| Backend API | http://localhost:5000 | 5000 |
| AI Service | http://localhost:8000 | 8000 |

---

## ğŸ“š HÆ°á»›ng Dáº«n Chi Tiáº¿t

### ğŸ“¤ Upload & PhÃ¢n TÃ­ch Há»£p Äá»“ng

```typescript
// Frontend: Gá»­i file há»£p Ä‘á»“ng
const formData = new FormData();
formData.append('file', contractFile);
formData.append('email', userEmail);

const response = await fetch('http://localhost:5000/api/contract/upload', {
  method: 'POST',
  body: formData
});

const { contractId } = await response.json();
```

**Quy trÃ¬nh Backend:**
1. LÆ°u file vÃ o thÆ° má»¥c `uploads/`
2. Gá»i AI Lambda endpoint
3. Lambda xá»­ lÃ½ vá»›i Claude 3 Haiku
4. LÆ°u káº¿t quáº£ vÃ o database
5. Táº¡o chat session tá»± Ä‘á»™ng

### ğŸ’¬ Chat vá» Há»£p Äá»“ng

```typescript
// Gá»­i tin nháº¯n
const res = await fetch('http://localhost:5000/api/chat/send', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    contractId: 'contract-id',
    message: 'Äiá»u khoáº£n thanh toÃ¡n cÃ³ rá»§i ro gÃ¬?'
  })
});

// Láº¥y lá»‹ch sá»­ chat
const chat = await fetch(`http://localhost:5000/api/chat/${contractId}`);
const messages = await chat.json();
```

### ğŸ” Authentication Flow

```bash
# 1. ÄÄƒng kÃ½
POST /api/auth/register
{
  "email": "user@example.com",
  "password": "securepassword",
  "name": "John Doe",
  "phone": "+84912345678"
}

# 2. ÄÄƒng nháº­p
POST /api/auth/login
{
  "email": "user@example.com",
  "password": "securepassword"
}

# 3. Láº¥y thÃ´ng tin user
GET /api/auth/me?email=user@example.com
```

### ğŸ“Š Database Schema

**MÃ´ hÃ¬nh dá»¯ liá»‡u chÃ­nh:**

```sql
-- Users
- id (UUID)
- email (UNIQUE)
- passwordHash
- fullName, phone, dob
- provider (credentials/google)
- role (USER/ADMIN)

-- Contracts
- id (UUID)
- userId (FK)
- fileName, fileSize, mimeType
- s3Key (file path)
- status (PENDING/PROCESSING/COMPLETED/FAILED)
- createdAt, updatedAt

-- AnalysisReports
- id (UUID)
- contractId (UNIQUE, FK)
- summary (TEXT)
- overallRisk (LOW/MEDIUM/HIGH/CRITICAL)
- fullJsonResult (JSON)
- modelUsed

-- ChatSessions & Messages
- ChatSession: userId, contractId
- Message: sessionId, role (USER/AI), content
```

---

## ğŸš€ Triá»ƒn Khai

### Docker

```bash
# Build images
docker-compose build

# Cháº¡y services
docker-compose up

# Hoáº·c chá»‰ backend
docker run -p 5000:5000 \
  -e DATABASE_URL="postgresql://..." \
  -e AI_LAMBDA_URL="http://ai-service:8000/contracts/analyze" \
  trustlegal-backend
```

### Vercel (Frontend)

```bash
# Deploy Next.js
vercel deploy --prod
```

### AWS Lambda (AI Service)

1. ÄÃ³ng gÃ³i Python code thÃ nh ZIP
2. Upload lÃªn AWS Lambda
3. Set trigger: API Gateway
4. Cáº¥u hÃ¬nh IAM cho Bedrock access

### Production Checklist

- [ ] Sá»­ dá»¥ng HTTPS/TLS
- [ ] Cáº¥u hÃ¬nh CORS Ä‘Ãºng
- [ ] Thiáº¿t láº­p rate limiting
- [ ] Enable database backup
- [ ] Cáº¥u hÃ¬nh logging & monitoring
- [ ] Set up error tracking (Sentry)
- [ ] Configure email service
- [ ] Optimize database indexes

---

## ğŸ“ Cáº¥u TrÃºc ThÆ° Má»¥c

```
local-contract/
â”œâ”€â”€ frontend/                    # Next.js 15
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                # App Router pages
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx        # Home page + News feed
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/      # User dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ login/          # Login page
â”‚   â”‚   â”‚   â”œâ”€â”€ register/       # Register page
â”‚   â”‚   â”‚   â”œâ”€â”€ generator/      # Contract generator
â”‚   â”‚   â”‚   â””â”€â”€ pricing/        # Pricing page
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analysis/   # Analysis display
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat/       # Chat interface
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ contract/   # Contract upload
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/         # Shared layouts
â”‚   â”‚   â”‚   â””â”€â”€ ui/             # Reusable UI components
â”‚   â”‚   â””â”€â”€ lib/                # Utilities
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                     # Express + TypeScript
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ server.ts           # Main server file
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma       # Database schema
â”‚   â”œâ”€â”€ uploads/                # Local file storage
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ AI-Service/                  # FastAPI + Python
â”‚   â”œâ”€â”€ main.py                 # FastAPI wrapper
â”‚   â”œâ”€â”€ lambda_function_callllm.py
â”‚   â”œâ”€â”€ lambda_function_ragsearch.py
â”‚   â””â”€â”€ legal_chunks_with_emb.jsonl
â”‚
â””â”€â”€ package.json                 # Root workspace
```

---

## ğŸ”§ API Endpoints

### Authentication
```
POST   /api/auth/register          # ÄÄƒng kÃ½
POST   /api/auth/login             # ÄÄƒng nháº­p
GET    /api/auth/me?email=...      # Láº¥y thÃ´ng tin user
```

### Contracts
```
POST   /api/contract/upload        # Upload há»£p Ä‘á»“ng
GET    /api/contracts?email=...    # Danh sÃ¡ch há»£p Ä‘á»“ng
DELETE /api/contract/:id           # XÃ³a há»£p Ä‘á»“ng
```

### Chat
```
GET    /api/chat/:contractId       # Lá»‹ch sá»­ chat
POST   /api/chat/send              # Gá»­i tin nháº¯n
```

### News
```
GET    /api/news                   # Danh sÃ¡ch tin tá»©c
```

---

## ğŸ§ª Testing

### Unit Tests (Backend)

```bash
cd backend
npm test
```

### Integration Tests

```bash
npm run test:integration
```

### Load Testing

```bash
npm run test:load
```

---

## ğŸ› Troubleshooting

### Lá»—i: `Cannot find module 'lambda_function.py'`
```bash
# Cháº¯c cháº¯n file lambda_function.py náº±m trong thÆ° má»¥c AI-Service/
# Hoáº·c thÃªm sys.path vÃ o main.py
```

### Lá»—i: `AI_LAMBDA_URL` khÃ´ng káº¿t ná»‘i
```bash
# Kiá»ƒm tra AI service Ä‘ang cháº¡y
curl http://localhost:8000

# Check .env cÃ³ Ä‘Ãºng URL khÃ´ng
echo $AI_LAMBDA_URL
```

### Database connection error
```bash
# Kiá»ƒm tra PostgreSQL Ä‘ang cháº¡y
psql -U postgres -d trustlegal -c "SELECT 1;"

# Reset migration
cd backend && npx prisma migrate reset
```

---

## ğŸ¤ ÄÃ³ng GÃ³p

ChÃºng tÃ´i hoan nghÃªnh cÃ¡c pull request! Vui lÃ²ng:

1. Fork repository
2. Táº¡o branch feature (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Má»Ÿ Pull Request

---

## ğŸ“Š Performance Metrics

- âš¡ **Frontend Load Time**: < 2s (First Contentful Paint)
- ğŸ”„ **API Response Time**: < 200ms (average)
- ğŸ¤– **AI Analysis Time**: 5-15s (depending on document size)
- ğŸ’¾ **Database Query Time**: < 50ms

---

## ğŸ“„ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c cáº¥p phÃ©p dÆ°á»›i **MIT License** - xem file [LICENSE](LICENSE) Ä‘á»ƒ biáº¿t chi tiáº¿t.

---

## ğŸ‘¥ TÃ¡c Giáº£

**TrustLegal Team**

- ğŸ”¨ Development: Full-stack Engineer
- ğŸ¤– AI/ML: Data Scientist
- ğŸ¨ UI/UX: Product Designer

---

## ğŸ“ LiÃªn Há»‡ & Support

- **Email**: support@trustlegal.com
- **Issues**: [GitHub Issues](https://github.com/yourusername/trustlegal/issues)
- **Discord**: [Community Server]
- **Documentation**: [Wiki](https://github.com/yourusername/trustlegal/wiki)

---

## ğŸ“ Vá» Dá»± Ãn

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn nhÆ° pháº§n cá»§a khÃ³a há»c táº¡i **FPTU** Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á»:
- ğŸ“‹ PhÃ¢n tÃ­ch há»£p Ä‘á»“ng tá»‘n thá»i gian
- âš ï¸ KhÃ³ phÃ¡t hiá»‡n rá»§i ro
- ğŸ“š Tra cá»©u phÃ¡p lÃ½ phá»©c táº¡p

**Solution:** Káº¿t há»£p AI + RAG Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh phÃ¡p lÃ½ cho doanh nghiá»‡p hiá»‡n Ä‘áº¡i.

---

<div align="center">

### â­ Náº¿u báº¡n thÃ­ch dá»± Ã¡n nÃ y, hÃ£y cho má»™t â­ GitHub!

![Stars](https://img.shields.io/github/stars/yourusername/trustlegal?style=social)
![Forks](https://img.shields.io/github/forks/yourusername/trustlegal?style=social)

**Made with â¤ï¸ by TrustLegal Team**

</div>
# TrustLegal Â· AI Contract Intelligence Platform
> Giáº£i phÃ¡p end-to-end giÃºp doanh nghiá»‡p Viá»‡t Nam Ä‘á»c â€“ hiá»ƒu â€“ Ä‘Ã m phÃ¡n há»£p Ä‘á»“ng trong vÃ i phÃºt báº±ng RAG + LLM vÃ  báº£ng Ä‘iá»u khiá»ƒn Ä‘áº¹p máº¯t.

![Next.js](https://img.shields.io/badge/Next.js-16-black?logo=next.js)
![Express](https://img.shields.io/badge/Express.js-5-green?logo=express)
![Prisma](https://img.shields.io/badge/Prisma-5.22-blue?logo=prisma)
![AWS Bedrock](https://img.shields.io/badge/AWS-Bedrock-orange?logo=amazonaws)

## TÃ³m táº¯t nhanh
- Landing page vÃ  dashboard Next.js 19 (App Router) vá»›i hero chuyá»ƒn Ä‘á»™ng, crawler tin phÃ¡p lÃ½ realtime vÃ  tráº£i nghiá»‡m upload + chat há»£p Ä‘á»“ng mÆ°á»£t mÃ .
- Backend Express + Prisma/PostgreSQL quáº£n lÃ½ user, háº¡n ngáº¡ch upload, pipeline xá»­ lÃ½ file (multer â†’ AI Lambda â†’ lÆ°u káº¿t quáº£ phÃ¢n tÃ­ch + má»Ÿ phiÃªn chat).
- AI-Service Python mÃ´ phá»ng Lambda: FastAPI proxy, 2 hÃ m chÃ­nh cho Claude 3 Haiku (contract analysis) vÃ  RAG search (Cohere embeddings + index phÃ¡p lÃ½ ~900 MB).
- Quy trÃ¬nh trá»n váº¹n: ngÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½ â†’ táº£i há»£p Ä‘á»“ng â†’ AI Ä‘Ã¡nh giÃ¡ rá»§i ro + táº¡o bÃ¡o cÃ¡o JSON + seed há»™i thoáº¡i â†’ chat há»i Ä‘Ã¡p â†’ xem tin tá»©c phÃ¡p luáº­t cáº­p nháº­t.

## Má»¥c lá»¥c
1. [Kiáº¿n trÃºc tá»•ng thá»ƒ](#kiáº¿n-trÃºc-tá»•ng-thá»ƒ)
2. [Äiá»ƒm ná»•i báº­t](#Ä‘iá»ƒm-ná»•i-báº­t)
3. [NgÄƒn xáº¿p cÃ´ng nghá»‡](#ngÄƒn-xáº¿p-cÃ´ng-nghá»‡)
4. [Cáº¥u trÃºc thÆ° má»¥c](#cáº¥u-trÃºc-thÆ°-má»¥c)
5. [HÆ°á»›ng dáº«n cháº¡y local](#hÆ°á»›ng-dáº«n-cháº¡y-local)
6. [Luá»“ng nghiá»‡p vá»¥ & API chÃ­nh](#luá»“ng-nghiá»‡p-vá»¥--api-chÃ­nh)
7. [Ká»‹ch báº£n demo gá»£i Ã½](#ká»‹ch-báº£n-demo-gá»£i-Ã½)
8. [Äá»‹nh hÆ°á»›ng phÃ¡t triá»ƒn](#Ä‘á»‹nh-hÆ°á»›ng-phÃ¡t-triá»ƒn)

## Kiáº¿n trÃºc tá»•ng thá»ƒ
```
[Next.js Frontend]
    â”œâ”€ Landing page + Pricing
    â”œâ”€ Dashboard upload + chat há»£p Ä‘á»“ng
    â””â”€ Tin phÃ¡p luáº­t realtime (crawler)
          â”‚
          â–¼
[Express + Prisma API] â”€â”€â”€ PostgreSQL
    â”œâ”€ Auth, subscription, quota
    â”œâ”€ Quáº£n lÃ½ há»£p Ä‘á»“ng + bÃ¡o cÃ¡o AI
    â”œâ”€ Chat session & message seed
    â””â”€ REST API /api/*
          â”‚
          â–¼
[AI-Service (FastAPI)] â”€â”€â–º AWS Bedrock Claude 3 Haiku
    â”œâ”€ lambda_function_callllm.py  (phÃ¢n tÃ­ch rá»§i ro)
    â””â”€ lambda_function_ragsearch.py (Cohere embedding + S3 index)
```
- **Frontend** (`frontend/`): Next.js 16, Tailwind, Framer Motion, Lucide, Radix UI; state client side Ä‘á»ƒ thao tÃ¡c file/chat trá»±c tiáº¿p.
- **Backend** (`backend/`): Express 5 + Prisma Client. Multer lÆ°u file local, táº¡o `Contract`, cáº­p nháº­t `Subscription`, gá»i AI Lambda, ghi `AnalysisReport`, táº¡o `ChatSession` vÃ  seed message. CÃ³ crawler tin tá»©c tá»« BÃ¡o ChÃ­nh Phá»§ (axios + cheerio).
- **AI-Service** (`AI-Service/`): Python 3.12, FastAPI wrapper cháº¡y local nhÆ°ng giáº£ láº­p Lambda. `lambda_function_callllm.py` chuáº©n hÃ³a prompt, chá»n TEXT/DOCUMENT mode, parse JSON; `lambda_function_ragsearch.py` táº£i index tá»« S3, dÃ¹ng Cohere embed-multilingual-v3 Ä‘á»ƒ tÃ¬m vÄƒn báº£n luáº­t liÃªn quan.

## Äiá»ƒm ná»•i báº­t
- **AI Contract Risk Analysis**: Claude 3 Haiku Ä‘á»c PDF/DOCX/HTML, tráº£ vá» JSON chuáº©n gá»“m tÃ³m táº¯t, má»©c Ä‘á»™ rá»§i ro, danh sÃ¡ch risk items vÃ  gá»£i Ã½ Ä‘iá»u khoáº£n luáº­t liÃªn quan.
- **Realtime Legal News Hub**: Trang chá»§ hiá»ƒn thá»‹ tin ná»•i báº­t + danh sÃ¡ch tin kinh táº¿/chÃ­nh sÃ¡ch má»›i nháº¥t (crawl >6 bÃ i) vá»›i fallback áº£nh thÃ´ng minh theo chá»§ Ä‘á».
- **Quota & Subscription Guard**: User má»›i nháº­n Free Trial (5 uploads). Upload tá»± Ä‘á»™ng tÄƒng `currentUploads`, kiá»ƒm tra trÆ°á»›c khi gá»­i AI Ä‘á»ƒ trÃ¡nh spam.
- **Chat Layer trÃªn káº¿t quáº£ AI**: Sau khi phÃ¢n tÃ­ch, há»‡ thá»‘ng táº¡o `ChatSession`, seed message cÃ³ tÃ³m táº¯t vÃ  thá»‘ng kÃª rá»§i ro; ngÆ°á»i dÃ¹ng chat tiáº¿p, message lÆ°u database.
- **RAG-ready AI stack**: Dá»‹ch vá»¥ RAG riÃªng dÃ¹ng Cohere embeddings, cosine similarity, filter metadata (source_type, doc_category, field) Ä‘á»ƒ cung cáº¥p legal context cho prompt.
- **CLI one-command dev**: `npm run dev` á»Ÿ root = backend + frontend + AI local service cháº¡y song song báº±ng `concurrently`, phÃ¹ há»£p show-case trong CV.

## NgÄƒn xáº¿p cÃ´ng nghá»‡
| Layer            | CÃ´ng nghá»‡ chÃ­nh                                                                              |
|------------------|----------------------------------------------------------------------------------------------|
| Frontend         | Next.js 16 (App Router), React 19, TailwindCSS, Framer Motion, Radix UI, Lucide Icons        |
| Backend API      | Express 5, Prisma ORM, Multer, Axios, Cheerio, Nodemailer, bcryptjs                          |
| Database         | PostgreSQL (qua Prisma)                                                                      |
| AI / Data        | FastAPI, AWS Bedrock (Claude 3 Haiku), Cohere Embed v3, boto3, JSONL legal corpus (~0.9 GB)  |
| Tooling          | TypeScript, ts-node, concurrently, dotenv, ESLint, Tailwind CLI                              |

## Cáº¥u trÃºc thÆ° má»¥c
```
local-contract/
â”œâ”€ frontend/        # Next.js app, pages (landing, login, dashboard, pricing)
â”œâ”€ backend/         # Express server, Prisma schema, uploads/, src/server.ts
â”œâ”€ AI-Service/      # FastAPI wrapper + 2 lambda_function_* files + corpus jsonl
â”œâ”€ package.json     # Scripts Ä‘á»ƒ cháº¡y Ä‘á»“ng thá»i FE/BE/AI
â””â”€ README.md        # Báº¡n Ä‘ang Ä‘á»c
```

## HÆ°á»›ng dáº«n cháº¡y local
1. **CÃ i Ä‘áº·t**  
   ```bash
   npm run install:all
   ```
2. **Biáº¿n mÃ´i trÆ°á»ng**
   - `backend/.env`: `DATABASE_URL=postgres://...`, `AI_LAMBDA_URL=http://localhost:8000/contracts/analyze`, thÃ´ng tin SMTP náº¿u kÃ­ch hoáº¡t gá»­i mail (`SMTP_USER`, `SMTP_PASS` thay cho giÃ¡ trá»‹ máº«u trong code).
   - `AI-Service/.env`: `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_REGION`, `MODEL_ID` (vd `anthropic.claude-3-haiku-20240307-v1:0`), `RAG_API_URL` (náº¿u gá»i chÃ©o), `LEGAL_INDEX_BUCKET`, `LEGAL_INDEX_KEY`.
3. **Prisma migrate**
   ```bash
   cd backend
   npx prisma migrate dev
   cd ..
   ```
4. **Cháº¡y toÃ n bá»™ stack**
   ```bash
   npm run dev
   ```
   - FE: http://localhost:3000  
   - BE: http://localhost:5000  
   - AI-Service: http://localhost:8000

## Luá»“ng nghiá»‡p vá»¥ & API chÃ­nh
1. **ÄÄƒng kÃ½ / Ä‘Äƒng nháº­p**  
   - `POST /api/auth/register`: táº¡o user + subscription Free Trial (PlanType.FREE_TRIAL).  
   - `POST /api/auth/login`: verify email/password (bcrypt).  
   - `GET /api/auth/me?email=...`: láº¥y thÃ´ng tin + subscription Ä‘á»ƒ render dashboard.
2. **Upload & phÃ¢n tÃ­ch há»£p Ä‘á»“ng**  
   - `POST /api/contract/upload`: Multer nháº­n file â†’ lÆ°u metadata â†’ check quota â†’ táº¡o `Contract` tráº¡ng thÃ¡i `PENDING` â†’ pháº£n há»“i `contractId`.  
   - TÃ¡c vá»¥ ná»n: gá»i `callAILambda()` â†’ parse káº¿t quáº£ â†’ táº¡o `AnalysisReport`, chuyá»ƒn tráº¡ng thÃ¡i `COMPLETED`, má»Ÿ `ChatSession`, seed message tá»« AI.  
   - Náº¿u tháº¥t báº¡i, contract chuyá»ƒn `FAILED` vÃ  lÆ°u `errorMessage`.
3. **Chi tiáº¿t há»£p Ä‘á»“ng & chat**  
   - `GET /api/contracts?email=...`: lá»‹ch sá»­ upload (id, tÃªn file, tráº¡ng thÃ¡i, risk).  
   - `GET /api/chat/:contractId`: tráº£ danh sÃ¡ch messages (user/ai).  
   - `POST /api/chat/send`: lÆ°u cÃ¢u há»i user, táº¡o pháº£n há»“i giáº£ láº­p AI (hiá»‡n placeholder, chá» tÃ­ch há»£p model há»™i thoáº¡i).
4. **Tin phÃ¡p luáº­t**  
   - `GET /api/news`: crawler BÃ¡o ChÃ­nh Phá»§ (axios + cheerio), gáº¯n áº£nh dá»± phÃ²ng, ghÃ©p tin ghim vÃ  tin má»›i (kinh táº¿, chÃ­nh sÃ¡ch).
5. **RAG search service**  
   - `POST /rag/search` (AI-Service): nháº­n `query`, `top_k`, `filters`, sinh embedding Cohere, tÃ­nh cosine, tráº£ vá» chunk vÄƒn báº£n (kÃ¨m score), phá»¥c vá»¥ prompt injection.

## Ká»‹ch báº£n demo gá»£i Ã½
1. **Landing â†’ ÄÄƒng kÃ½ â†’ Dashboard**: cho tháº¥y thÆ°Æ¡ng hiá»‡u TrustLegal, CTA, sau Ä‘Ã³ chuyá»ƒn tá»›i dashboard vá»›i tráº¡ng thÃ¡i user Ä‘Æ°á»£c fetch láº¡i tá»« backend.
2. **Upload há»£p Ä‘á»“ng phÃ¡p lÃ½**: kÃ©o tháº£ file PDF máº«u, xem spinner, sau 2â€“3s chatbox Ä‘Æ°á»£c seed báº±ng tÃ³m táº¯t AI + risk level.
3. **Chat truy váº¥n Ä‘iá»u khoáº£n**: há»i â€œrá»§i ro thanh toÃ¡nâ€, AI (placeholder) tráº£ lá»i gá»£i Ã½; highlight Ã½ tÆ°á»Ÿng future integration.
4. **Theo dÃµi quota**: upload >5 file sáº½ bá»‹ cháº·n (403) â†’ giá»›i thiá»‡u mÃ n Pricing & upsell plan Pro/Enterprise.
5. **News Hub**: quay vá» landing, scroll pháº§n Tin tá»©c hiá»ƒn thá»‹ dá»¯ liá»‡u crawler, nháº¥n má»Ÿ bÃ i gá»‘c BÃ¡o ChÃ­nh Phá»§ â†’ chá»©ng minh tÃ­nh realtime.

## Äá»‹nh hÆ°á»›ng phÃ¡t triá»ƒn
- Káº¿t ná»‘i thá»±c táº¿ vá»›i AWS Bedrock / Bedrock Agents Ä‘á»ƒ biáº¿n chat reply tá»« placeholder thÃ nh há»™i thoáº¡i RAG hoÃ n chá»‰nh.
- Gáº¯n stripe/webhook cho module Pricing, tá»± Ä‘á»™ng nÃ¢ng cáº¥p `Subscription.planType`.
- Triá»ƒn khai storage S3 + signed URL Ä‘á»ƒ quáº£n lÃ½ file an toÃ n thay vÃ¬ lÆ°u local `uploads/`.
- Viáº¿t test (Vitest/Jest cho frontend, supertest cho backend) vÃ  bá»• sung CI (GitHub Actions) Ä‘á»ƒ tÄƒng Ä‘á»™ tin cáº­y trÆ°á»›c khi public.

---
Made with â¤ï¸ bá»Ÿi nhÃ³m TrustLegal â€“ sáºµn sÃ ng xuáº¥t hiá»‡n trong portfolio & CV cá»§a báº¡n!
